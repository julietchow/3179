{
    "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
    "width": 800, "height": 300,
    "data": {"url":"https://raw.githubusercontent.com/julietchow/3179/main/data/stacked_area_chart.csv"},
    "title": {
        "text": "Energy Consumption Per Capita (2000 - 2021)",
        "fontSize": 18
    },
    "params":[
      {
        "name": "select_continent",
        "value": "Total",
        "bind": {
          "input": "select",
          "options": [
            "Total",
            "Africa",
            "Asia & Oceania",
            "Central & South America",
            "Eurasia",
            "Europe",
            "Middle East",
            "North America"
          ],
          "labels": [
            "All (Total)",
            "Africa",
            "Asia & Oceania",
            "Central & South America",
            "Eurasia",
            "Europe",
            "Middle East",
            "North America"
          ],
            "name": "Continent : "
        }
        }
    ],
    "transform": [
        {"filter": "datum.Continent == select_continent"}
    ],
    "encoding": {
        "x": {
          "timeUnit": "year", "field": "Year",
          "axis": {"format": "%Y"},
          "title": "Year",
          "type": "temporal"
        }
    },
    "layer":[
      {
        "mark":"area",
        "encoding": {
          "y": {
            "aggregate": "sum",
            "field": "count",
            "title": "Energy Consumption (Sextillion kWh)"
          },
          "color": {
            "field": "Energy Source",
            "scale": {
                "scheme": "category20"
            },
            "legend" : {"title": "Energy Sources (Sextillion kWh)"}
          },
          "tooltip": [
            {"field": "Year", "type": "quantitative", "format": ",.2f"},
            {"field":"Continent","type":"quantitative"}
          ]
        }
      },
      {
        "params": [{
          "name": "index",
          "select": {
            "type": "point",
            "encodings": ["x"],
            "on": "mousemove",
            "nearest": true
          }
        }],
        "mark": {"type": "point"},
        "encoding": {
          "y": {"aggregate": "sum","field": "count", "type": "quantitative"},
          "opacity": {"value": 0}
        }
      },
      {
        "transform": [
          {"filter": {
            "and": ["index.Year", {"param": "index"}]
          }}
        ],
        "mark": "rule",
        "encoding": {
          "x" : {"field":"year"},
          "y": {"aggregate": "sum","field": "count", "type": "quantitative"},
          "size": {"value":100}
        }
      },
      {
        "transform": [
          {"filter": {
            "and": ["index.Year", {"param": "index"}]
          }}
        ],
        "mark": "text",
        "encoding": {
          "y": {"value": 10},
          "text": {"field": "Year"}
        }
      }
    ],
    "config": {"text": {"align": "right", "dx": -5, "dy": 5}}
  }